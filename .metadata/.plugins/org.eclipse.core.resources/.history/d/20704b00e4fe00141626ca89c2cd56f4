
import java.rmi.NotBoundException;
import java.rmi.RemoteException;
import java.rmi.registry.LocateRegistry;
import java.rmi.registry.Registry;
import java.sql.Date;
import java.util.ArrayList;

import javax.swing.*;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
 
/**
 * ProvinceClient: client application
 * @author http://lycog.com
 */
public class ProvinceClient {
	public Registry registry;
	public IRemoteProvince rp;
	public IRemoteAstheneis as;
	public IRemoteAstheneisAllergies al;
	public IRemoteAstheneisTravma at;
	public IRemoteComments com;
	public IRemoteWarnings warn;
	public IRemoteRisk risk;
	public IRemoteEidiIpallilwn eidiYpal;
	public IRemoteIstorikoTherapeias istoriko;
	public IRemotePatientAstheneies patientAsth;
	public IRemoteSiggenisAstheni siggenis;
	public IRemoteTherapeia therapeia;
	public IRemoteTherapeiesAstheneies therapeiesAstheneies;
	public  IRemoteConsultation consultation;
	public IRemoteTypeAstheneias typeAsth;
	
	public ProvinceClient() throws RemoteException, NotBoundException{
	       registry = LocateRegistry.getRegistry("127.0.0.1");

	       //Lookup server object
	       rp = (IRemoteProvince) registry.lookup("Province");
	       as = (IRemoteAstheneis) registry.lookup("Astheneis");
	       al = (IRemoteAstheneisAllergies) registry.lookup("AstheneisAllergies");
	       at = (IRemoteAstheneisTravma) registry.lookup("AstheneisTravma");
	       com = (IRemoteComments) registry.lookup("comments");
	       warn= (IRemoteWarnings) registry.lookup("warnings");
	       risk = (IRemoteRisk) registry.lookup("risk");
	       eidiYpal = (IRemoteEidiIpallilwn) registry.lookup("eidiYpallilwn");
	       istoriko = (IRemoteIstorikoTherapeias) registry.lookup("istoriko");
	       patientAsth = (IRemotePatientAstheneies) registry.lookup("patientAstheneies");
	       siggenis = (IRemoteSiggenisAstheni) registry.lookup("siggeneis");
	       therapeia = (IRemoteTherapeia) registry.lookup("therapeia");
	       therapeiesAstheneies = (IRemoteTherapeiesAstheneies) registry.lookup("therapeiaAstheneies");
	       consultation = (IRemoteConsultation) registry.lookup("consult");
	       typeAsth = (IRemoteTypeAstheneias) registry.lookup("typeAstheneias");
	       
	}
	
	
	
  public static void main(String[] args) {
    try {
      //Get reference to rmi registry server
    	//System.setProperty("java.rmi.server.hostname","127.0.0.1");
      /* al = (IRemoteAstheneisAllergies) registry.lookup("AstheneisAllergies");
       at = (IRemoteAstheneisTravma) registry.lookup("AstheneisTravma");
       com = (IRemoteComments) registry.lookup("comments");
      warn= (IRemoteWarnings) registry.lookup("warnings");
       risk = (IRemoteRisk) registry.lookup("risk");
       eidiYpal = (IRemoteEidiIpallilwn) registry.lookup("eidiYpallilwn");
       istoriko = (IRemoteIstorikoTherapeias) registry.lookup("istoriko");
      patientAsth = (IRemotePatientAstheneies) registry.lookup("patientAstheneies");
      siggenis = (IRemoteSiggenisAstheni) registry.lookup("siggeneis");
      therapeia = (IRemoteTherapeia) registry.lookup("therapeia");
      therapeiesAstheneies = (IRemoteTherapeiesAstheneies) registry.lookup("therapeiaAstheneies");
      consultation = (IRemoteConsultation) registry.lookup("consult");
      typeAsth = (IRemoteTypeAstheneias) registry.lookup("typeAstheneias");*/
     
      
      
      //Save province
    	Province bmc = new Province(8282, "rlouka01", "Rafaellita", "Louka", "99394781" , "rafkiola@gmail.com", 2);
      	System.out.println("Saving provinces...");
      //rp.save(bmc);
      	ProvinceClient antikeimeno = new ProvinceClient();

      
	    String user = JOptionPane.showInputDialog(null,"Δώστε το username σας");
	    
	    if (user != null){
	        while ((antikeimeno.rp.findByUsername(user).getPassword()==0) && (user != null)){
	         user = JOptionPane.showInputDialog("Δώσατε μη υπαρκτό username.\n Δώστε ξανά το username σας");

	        }
	        
	        if (user != null){

	            String pass = JOptionPane.showInputDialog("Δώστε τον κωδικό σας");
	            int passwd = Integer.parseInt(pass);
	            int passwordofIpallilos = antikeimeno.rp.findByUsername(user).getPassword();
	            
	            System.out.println(passwordofIpallilos);
	            while ((passwd!=passwordofIpallilos) && (user != null)){
	            user = JOptionPane.showInputDialog("Δώσατε λάθος κωδικό. Επαναλάβετε τη διαδικασία. \n Δώστε το username σας");
	            while ((antikeimeno.rp.findByUsername(user).getPassword()==0)  && (user != null)){
	             user = JOptionPane.showInputDialog("Δώσατε μη υπαρκτό username.\n Δώστε ξανά το username σας");
	            }
	            if (user != null){
	            pass = JOptionPane.showInputDialog("Δώστε τον κωδικό σας");
	            passwd = Integer.parseInt(pass);
	            passwordofIpallilos = antikeimeno.rp.findByUsername(user).getPassword();
	            } 
	            }
	            }
	    }
	        
	        
	    Province ipallilos = new Province();
	    ipallilos=antikeimeno.rp.findByUsername(user);
	    
	    switch (ipallilos.getCodeType()){
	    
	    case 1:
	    		antikeimeno.EpifaneiaReceptionist(ipallilos);
	    		break;
	   /* case 2: EpifaneiaDoctor(ipallilos);
	    		break;
	    case 3: EpifaneiaNurse(ipallilos);
	    		break;
	    case 4: EpifaneiaHealthVisitor(ipallilos);
	    		break;
	    case 5: EpifaneiaMedicalRecordsStaff(ipallilos);
	    		break;
	    case 6: EpifaneiaManagers(ipallilos);
	    		break;*/
	    }
	    
	    

    } catch (Exception e) {
        System.out.println(e);
      }
  }
	public  void MenuButtons(){
		JFrame fm = new JFrame ("Menu");
	    fm.setLayout( new FlowLayout() );      // set the layout manager
   	    fm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   	    JButton appointment = new JButton("Προσθήκη Ραντεβού"); // construct a JButton
	    JButton viewApp = new JButton("Προεπισκόπηση Ραντεβού");
	    JButton search = new JButton("Αναζήτηση Εγγραφής");
	    JButton allPatient = new JButton ("Όλοι οι ασθενείς");
	    JButton sintagi = new JButton ("Παραγωγή τελευταίας Συνταγής Ασθενή");
		
	    fm.getContentPane().add(appointment);
	    fm.getContentPane().add(viewApp);
	    fm.getContentPane().add(search);
	    fm.getContentPane().add(allPatient);
	    fm.getContentPane().add(sintagi);	    
	    fm.pack();
   	    fm.setSize( 500, 250);     
   	    fm.setVisible( true ); 
   	 appointment.addActionListener(new ActionListener() {
	    	
            public void actionPerformed(ActionEvent e)
            {
            	appointment();
            }
        });  
   	viewApp.addActionListener(new ActionListener() {
	    	
            public void actionPerformed(ActionEvent e)
            {
            	viewApp();
            }
        });  
   	 
   	search.addActionListener(new ActionListener() {
	    	
            public void actionPerformed(ActionEvent e)
            {
            	search();
                System.out.println("Irthe edw");
            }
        });  
   	allPatient.addActionListener(new ActionListener() {
	    	 
            public void actionPerformed(ActionEvent e)
            {
                //Execute when button is pressed
            	allPatient();
               System.out.println("prosthiki");
            }
        });  
   	sintagi.addActionListener(new ActionListener() {
	    	 
            public void actionPerformed(ActionEvent e)
            {
            	sintagi();
            }
        });  
	}
  public void EpifaneiaReceptionist(Province ipallilos){
	  MenuButtons();
	  
  }
  
  public static void sintagi(){
	  
  }
  
  public void allPatient(){
	  
		JFrame frame = new JFrame("Όλοι οι Ασθενείς: ");
        frame.setLayout(new BorderLayout());
        String [] categories= {"Όνομα" , "Επώνυμο" , "ID" , "Τηλέφωνο" , "Διεύθυνση" , "Email", "Στοιχεία Συγγενή"};
        ArrayList<Astheneis> arr = as.findAll();
        
        
        
        String[][] data = new String[arr.size()][7];
        data[0][0]="Ονοματεπώνυμο:"; data[0][1]=b.getName() + " " + b.getSurname();
        data[1][0]="Αριθμός Μητρώου:";
        data[1][1]= ""+ b.getAm();
        data[2][0]="Έτος Εισαγωγής: ";data[2][1]= "" + b.getIntroYear();
        data[3][0]= "Αρ. Τηλεφώνου:"; data[3][1]=b.getTel();
        data[4][0]="Διεύθυνση Email: "; data[4][1]= b.getMail();
        data[5][0]="Τελευταία Συνάντηση:"; data[5][1]=b.getDateLastMet();
        data[6][0]="Επόμενη Συνάντηση:"; data[6][1]=b.getDateNextMeet();
        data[7][0]="Τελικός Βαθμός:"; data[7][1]="" + b.getFilalGrade();
        data[8][0]="";data[8][1]="";
        data[9][0]="Τίτλος Πτυχιακής: "; data[9][1]=b.getStProject().getTitle();
        data[10][0]="Περιγραφή Εργασίας: "; data[10][1] = b.getStProject().getDescription();
        data[11][0]="Γλώσσα Προγραμματισμού: "; data[11][1]=b.getStProject().getProgLan();
        data[12][0]="Στάδιο Εργασίας:"; data[12][1]=b.getStProject().getStep();
        data[13][0]=""; data[13][1]="";
        data[14][0]="Όνομα Αρχείου:"; data[14][1]=b.getStProject().getFile().getNameFile();
        data[15][0]="Διεύθυνση Αρχείου:"; data[15][1]=b.getStProject().getFile().getAddressFile();
        data[16][0]="Περιγραφή Αρχείου:"; data[16][1]=b.getStProject().getFile().getDescription();
        
        
        JTable table = new JTable(data, categories);
        JScrollPane scrollPane = new JScrollPane(table);
        table.setFillsViewportHeight(true);
        frame.getContentPane().setLayout(new BorderLayout());
        frame.getContentPane().add(scrollPane,BorderLayout.CENTER);
        frame.setSize(1000, 550);
        frame.setVisible(true);
	  
	  
  }
  public static void search(){
	  
  }
  public static void viewApp(){
	  
  }
  public static void appointment(){
	  
  }


  
}