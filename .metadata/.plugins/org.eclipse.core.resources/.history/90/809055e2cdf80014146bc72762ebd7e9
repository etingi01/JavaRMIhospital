import java.sql.*;
import java.util.*;
 
public class AstheneisTravmaRepository {

	

	  public static int save(AstheneisTravma p) throws ClassNotFoundException {
	    int iRet = -1;
	    try {
	      Connection con = DBManager.getConnection();
	      String SQL = "INSERT INTO astheneistrauma(codeTrauma, kodAsthenei, description, imerominiaTrauma) Values(?,?,?,?)";
	      PreparedStatement pstmt = con.prepareStatement(SQL);
	      pstmt.setInt(1, p.getCodeTravma());
	      pstmt.setInt(2, p.getKodAstheni());
	      pstmt.setString(3, p.getDesctription());
	      pstmt.setDate(4, p.getImerominiaTravma());

	      iRet = pstmt.executeUpdate();
	 
	      pstmt.close();
	    } catch (SQLException se) {
	      System.out.println(se);
	    }
	    return iRet;
	  }
	  public static AstheneisTravma findByCodeTravma(int criteria) throws ClassNotFoundException {
		    ArrayList arr = new ArrayList();
		    AstheneisTravma p = new AstheneisTravma();

		    try {
		      String QRY = "SELECT * FROM astheneistrauma WHERE codeTrauma LIKE(?)";
		      Connection con = DBManager.getConnection();
		      PreparedStatement pstmt = con.prepareStatement(QRY);
		      pstmt.setString(1, "%" + criteria + "%");
		      ResultSet rs = pstmt.executeQuery();
		      while (rs.next()) {
		        p.setCodeTravma(rs.getInt("codeTrauma"));
		        p.setKodAstheni(rs.getInt("kodAsthenei"));
		        p.setDesctription(rs.getString("description"));
		        p.setOnoma(rs.getString("onoma"));
		        p.setTilefwno(rs.getString("tilefwno"));
		        p.setCodeType(rs.getInt("codeType"));
		        p.setUsename(rs.getString("username"));
		   }
		 
		      pstmt.close();
		    } catch (SQLException se) {
		      System.out.println(se);
		    }
		    return p;
		  }

	  
}
